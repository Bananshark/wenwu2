# 文物快速管理说明

## 概述

现在系统已升级为**配置驱动**模式，您只需要修改 `config.json` 文件即可快速添加或删除文物，无需修改任何HTML代码！

## 快速添加文物

### 步骤1：准备文件

1. **3D模型文件**：将模型文件（.glb 或 .gltf格式）放入 `model/` 文件夹
   - 例如：`./model/新文物.glb`

2. **AR识别文件**：
   - 如果使用新的识别图，需要生成新的 `.mind` 文件并放入 `mind/` 文件夹
   - 如果新文物要添加到现有的识别文件中，需要更新现有的 `.mind` 文件

### 步骤2：编辑配置文件

打开 `config.json` 文件，在 `artifacts` 对象中添加新条目：

```json
{
  "artifacts": {
    "0": {
      "title": "中山王厝铁足铜鼎",
      "content": "文物介绍内容...",
      "model": {
        "id": "Fe_foot",
        "path": "./model/ding.glb",
        "targetIndex": 0,
        "position": "0 -0.25 0",
        "rotation": "0 0 0",
        "scale": "1 1 1",
        "enableAnimation": true
      }
    },
    "2": {
      "title": "新文物名称",
      "content": "新文物的详细介绍内容...",
      "model": {
        "id": "new_artifact",
        "path": "./model/新文物.glb",
        "targetIndex": 2,
        "position": "0 -0.25 0",
        "rotation": "0 0 0",
        "scale": "1 1 1",
        "enableAnimation": false
      }
    }
  }
}
```

### 配置参数说明

| 参数 | 类型 | 说明 | 示例 |
|------|------|------|------|
| `title` | 字符串 | 文物标题 | `"青铜鼎"` |
| `content` | 字符串 | 文物详细介绍 | `"这是一件珍贵的文物..."` |
| `model.id` | 字符串 | 模型在场景中的唯一标识符（英文） | `"Fe_foot"` |
| `model.path` | 字符串 | 模型文件相对路径 | `"./model/ding.glb"` |
| `model.targetIndex` | 数字 | AR识别目标索引（必须与.mind文件中的目标索引对应） | `0`, `1`, `2` |
| `model.position` | 字符串 | 模型位置（x y z） | `"0 -0.25 0"` |
| `model.rotation` | 字符串 | 模型旋转（x y z，单位：度） | `"0 90 0"` |
| `model.scale` | 字符串 | 模型缩放（x y z） | `"1 1 1"` |
| `model.enableAnimation` | 布尔值 | 是否启用动画 | `true` 或 `false` |

### 步骤3：刷新页面

保存 `config.json` 后，刷新浏览器页面即可看到新文物！

## 快速删除文物

### 方法1：从配置文件中删除

直接在 `config.json` 的 `artifacts` 对象中删除对应的条目：

```json
{
  "artifacts": {
    "0": { ... },
    // 删除 "1": { ... }, 这一整段
    "2": { ... }
  }
}
```

删除后刷新页面即可。

### 方法2：注释掉文物（推荐用于临时禁用）

在配置中暂时不需要删除，可以在文物配置前添加 `_` 前缀，系统会自动跳过：

```json
{
  "artifacts": {
    "0": { ... },
    "_1": {  // 临时禁用，不显示在场景中
      "title": "...",
      ...
    },
    "2": { ... }
  }
}
```

## 修改MindAR识别文件路径

如果需要更换识别文件，只需修改 `config.json` 中的 `mindFile.path`：

```json
{
  "mindFile": {
    "path": "./mind/postcard&table.mind",
    "description": "MindAR识别文件路径"
  }
}
```

## 完整示例：添加第三个文物

### 1. 配置文件添加条目

```json
{
  "artifacts": {
    "0": {
      "title": "中山王厝铁足铜鼎",
      "content": "...",
      "model": {
        "id": "Fe_foot",
        "path": "./model/ding.glb",
        "targetIndex": 0,
        "position": "0 -0.25 0",
        "rotation": "0 0 0",
        "scale": "1 1 1",
        "enableAnimation": true
      }
    },
    "1": {
      "title": "错金银四龙四凤铜方案座",
      "content": "...",
      "model": {
        "id": "table",
        "path": "./model/铜龙桌子三维模型.glb",
        "targetIndex": 1,
        "position": "0 -0.25 0",
        "rotation": "0 0 0",
        "scale": "1 1 1",
        "enableAnimation": true
      }
    },
    "2": {
      "title": "新发现的珍贵文物",
      "content": "这是一件新发现的珍贵文物，具有重要的历史价值...",
      "model": {
        "id": "new_artifact",
        "path": "./model/新文物模型.glb",
        "targetIndex": 2,
        "position": "0 -0.5 0",
        "rotation": "0 45 0",
        "scale": "0.5 0.5 0.5",
        "enableAnimation": false
      }
    }
  }
}
```

### 2. 确保文件存在

- ✅ `./model/新文物模型.glb` 文件已存在
- ✅ `.mind` 识别文件包含索引为 2 的目标

### 3. 刷新页面

保存后刷新浏览器，新文物就会自动出现在AR场景中！

## 常见问题

### Q1: 添加文物后不显示？

**检查清单：**
- [ ] 模型文件路径是否正确
- [ ] `targetIndex` 是否与 `.mind` 文件中的目标索引对应
- [ ] 浏览器控制台是否有错误信息（按F12查看）
- [ ] 模型文件格式是否正确（.glb 或 .gltf）

### Q2: 模型位置或大小不合适？

修改配置中的以下参数：
- `position`: 调整模型位置（上下、前后、左右）
- `scale`: 调整模型大小（数字越大模型越大）
- `rotation`: 调整模型旋转角度

### Q3: 如何批量添加多个文物？

只需在 `artifacts` 对象中继续添加条目，使用不同的键（"0", "1", "2", "3"...）和不同的 `targetIndex` 即可。

### Q4: 删除文物后还需要删除模型文件吗？

不需要！配置文件删除后，系统就不会加载该模型了。模型文件可以保留，方便以后再次使用。

### Q5: targetIndex 如何确定？

`targetIndex` 必须与您的 `.mind` 文件中定义的目标索引对应。通常：
- 第一个识别目标：`targetIndex: 0`
- 第二个识别目标：`targetIndex: 1`
- 第三个识别目标：`targetIndex: 2`
- 以此类推...

如果不确定，可以查看生成 `.mind` 文件时的配置，或测试不同的索引值。

## 配置文件结构

完整的 `config.json` 结构示例：

```json
{
  "api": {
    "url": "https://...",
    "key": "sk-...",
    "appId": "..."
  },
  "mindFile": {
    "path": "./mind/postcard&table.mind"
  },
  "artifacts": {
    "0": {
      "title": "文物1",
      "content": "介绍1",
      "model": { ... }
    },
    "1": {
      "title": "文物2",
      "content": "介绍2",
      "model": { ... }
    }
  }
}
```

## 优势

✅ **无需修改代码**：只需编辑配置文件  
✅ **快速添加**：添加一个文物只需2-3分钟  
✅ **快速删除**：删除文物只需删除配置条目  
✅ **灵活配置**：每个文物都可以独立设置位置、旋转、缩放  
✅ **易于维护**：所有配置集中在一个文件中

## 技术支持

如果遇到问题，请：
1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签页的错误信息
3. 检查 Network 标签页确认文件加载情况
4. 验证 `config.json` 的JSON格式是否正确（可以使用在线JSON验证工具）

